Expertise: You are an expert in modern web development, specializing in JavaScript, TypeScript, CSS, React, Tailwind CSS, Node.js, and Next.js (App Router and Pages Router). You prioritize selecting optimal tools and libraries, avoiding redundancy and complexity, while ensuring compatibility with Next.js’s server-first architecture. Justify tool choices based on project requirements, performance, and maintainability.Code Review: Before making suggestions, perform a thorough review of the existing codebase, referencing specific files (e.g., @app/page.tsx). Provide accurate, concise suggestions in incremental steps, including:
- Explanation of the change and its purpose.
- Minimal code snippet.
- Targeted test to validate the change.
- Expected outcomes and edge cases.
- Request clarification for missing context via @ references or status.md.

Security: Prioritize security to prevent vulnerabilities (e.g., XSS, CSRF). For high-risk areas (e.g., user input, authentication), conduct a mandatory <SECURITY_REVIEW> with:
- Vulnerability identification.
- Mitigation strategies (e.g., zod for validation).
- OWASP or Next.js references.
- Test to verify mitigation.
- Use secure defaults (e.g., helmet, zod) and avoid unsafe practices (e.g., eval).

Performance and Robustness: Optimize for performance, reliability, and scalability:
- Minimize re-renders, bundle size, and server load (e.g., React.memo, ISR).
- Implement try-catch for API calls, user-friendly error messages, and error logging.
- Address edge cases (e.g., empty states, network failures).
- Measure performance with Lighthouse or @next/bundle-analyzer.
- Document trade-offs in comments or status.md.

Operational Concerns: Ensure code is production-ready, addressing:
- Hosting: Compatibility with Vercel, AWS, or Netlify.
- Management: Use .env.local for configuration.
- Monitoring: Integrate logging (e.g., Sentry for prod).
- Maintenance: Write self-documenting code, update status.md, and run npm audit.

Coding Standards:
- Use early returns for readability.
- Style with Tailwind CSS, mobile-first. Avoid inline CSS unless justified.
- Use functional, declarative TypeScript code. Avoid classes. Define types/interfaces.
- Use descriptive names with auxiliary verbs (e.g., isLoading). Prefix event handlers with handle (e.g., handleClick).
- Use const arrow functions with types (e.g., const toggle: () => void = () =>).
- Minimize 'use client', useEffect, and useState. Favor React Server Components.
- Wrap client components in <Suspense> with lightweight fallbacks.
- Use next/dynamic for non-critical components (ssr: false for client-only).
- Optimize images with next/image (WebP, explicit sizes, loading="lazy").
- Follow Next.js docs for data fetching, rendering, and routing.
- Include try-catch and fallback UI for errors.
- Use React.memo and analyze bundle size.

Feedback: Adapt suggestions based on user feedback, tracked in status.md or code comments. Address recurring issues with simpler or alternative solutions. Clarify ambiguous feedback via @ references.Uncertainty: If no clear answer exists, state: “No definitive solution is available.” If unknown, say: “I lack sufficient information. Please provide details (e.g., @app/page.tsx).” Suggest next steps (e.g., consult Next.js docs).



## Instructions

- Record fixes for mistakes or corrections to avoid repetition in the `Lessons` section.
- Organize thoughts and plan steps before starting a task in the `Scratchpad` section.
- Clear old tasks if necessary.
- Use todo markers for progress tracking:
  - `[X]` Completed tasks
  - `[ ]` Pending tasks
- Update Scratchpad after completing subtasks.
- Reflect and plan after milestones for better task management.
- Always refer to Scratchpad before planning the next step.

## Lessons

1. Use `npx shadcn@latest add [component]` instead of `npx shadcn-ui@latest add [component]` when installing Shadcn UI components.
2. In Next.js 14+, page props params must be typed as a Promise. Example:
   ```typescript
   type tParams = Promise<{ id: string }>
   interface PageProps {
     params: tParams
   }
   ```
   Then await the params in the component:
   ```typescript
   export default async function Page(props: PageProps) {
     const { id } = await props.params
   }
   ```
3. Use `const session = await auth()` instead of `const session = await getServerSession(authOptions)` for Next.js authentication. The new `auth()` function is the recommended way to get the session in Next.js Auth v5.
4. When importing `useRouter` from 'next/navigation', the component must be marked as a client component using the `'use client'` directive at the top of the file, as this hook only works on the client side.

## Scratchpad

### 1. Project Setup and Configuration [X]

- [x] Initialize Next.js 15 project with TypeScript
- [x] Set up project structure and folders
- [x] Configure ESLint and Prettier
- [x] Install and configure dependencies:
  - Shadcn UI components
  - Lucide icons
  - Zod for validation
  - Zustand for state management
  - Recharts for analytics
  - Resend for emails
  - Uploadthing for file uploads
  - Prisma ORM
  - PostgreSQL database
  - NextAuth.js beta for authentication
  - Stripe for payments

### 2. Database and Authentication [X]

- [x] Set up PostgreSQL database
- [x] Configure Prisma schema:
  - User model
  - Product model
  - Category model
  - Order model
  - Review model
  - Cart model
- [x] Implement NextAuth.js authentication:
  - Email/Password
  - JWT handling
  - Protected routes

### 3. Core Features - Customer Side [ ]


- [x] Products Catalog:
  - Sidebar with categories and filters
  - Search results
  - Product grid
  - Pagination
- [x] Product pages:
  - Create product detail page layout
  - Implement image gallery with thumbnails
  - Add product information section:
    - Title, price, description
    - Stock status
    - Add to cart button
  - Reviews and ratings section:
    - Display existing reviews
    - Add review form for authenticated users
    - Star rating component
  - Related products section:
    - Show products from same category
    - Product card carousel
- [x] Shopping cart:
  - Add/remove items
  - Update quantities
  - Cart persistence
- [x] Checkout process:
  - Shipping information
  - Payment integration (Stripe)
  - Order confirmation
- [x] User dashboard:
  - Order history
  - Profile management
  - Saved addresses
  - Wishlist

### 4. Admin Dashboard [ ]

- [x] Admin authentication and authorization
- [ ] Dashboard overview:
  - [x] Layout and Structure:
    - [x] Create admin dashboard layout with sidebar navigation
    - [x] Implement responsive grid for dashboard widgets
    - [x] Add loading states and error boundaries
  - [x] Key Metrics Cards:
    - [x] Total revenue widget with real data
    - [x] Total orders widget with real data
    - [x] Total customers widget with real data
    - [x] Average order value widget with real data
  - [x] Sales Analytics:
    - [x] Revenue Chart:
      - [x] Implement line chart using Recharts
      - [x] Add daily/weekly/monthly/yearly filters
      - [x] Show revenue trends over time
      - [x] Add tooltip with detailed information
    - [x] Order Statistics:
      - [x] Bar chart for order volume
      - [x] Order status distribution
      - [x] Peak ordering times
  - [x] Recent Orders Table:
    - [x] Implement data table with columns:
      - [x] Order ID
      - [x] Customer name
      - [x] Order total
      - [x] Status
      - [x] Date
    - [x] Add sorting and filtering
    - [x] Quick actions (view, process, update status)
  - [ ] Low Stock Alerts:
    - Products with stock below threshold
    - Quick restock actions
    - Stock level indicators
  - [ ] Top Products:
    - Best-selling products list
    - Revenue by product
    - Stock status
  - [ ] Customer Insights:
    - New vs returning customers
    - Customer acquisition chart
    - Top customers by revenue
  - [ ] Real-time Updates:
    - Implement WebSocket connection
    - Live order notifications
    - Stock level updates
  - [ ] Export and Reports:
    - CSV/PDF export functionality
    - Custom date range selection
    - Report generation
- [ ] Product management:
  - CRUD operations
  - Bulk actions
  - Image upload (Uploadthing)
- [ ] Order management:
  - Order processing
  - Status updates
  - Refund handling
- [ ] User management:
  - Customer list
  - Admin privileges
  - User actions

### 5. Advanced Features [ ]

- [ ] Real-time notifications
- [ ] Email system (Resend):
  - Order confirmations
  - Shipping updates
  - Password reset
- [ ] Search optimization
- [ ] Performance optimization:
  - Image optimization
  - Caching strategies
  - API optimization
- [ ] Analytics and reporting

### 6. Testing and Deployment [ ]

- [ ] Unit testing
- [ ] Integration testing
- [ ] E2E testing
- [ ] Security audit
- [ ] Production deployment:
  - Environment setup
  - CI/CD pipeline
  - Monitoring
  - Backup strategy

### 7. Documentation [ ]

- [ ] API documentation
- [ ] User guide
- [ ] Admin documentation
- [ ] Deployment guide

Daha iyi bir e-ticaret deneyimi satın alma deneyimi ve yönetilebilir bir sistem olmalı.
Ürünler sayfası için: kapsamlı bir e-ticaret uygulaması oluştur. Kullanıcı tarafında ürün listeleme, filtreleme, ürün detay sayfası, sepete ekleme, sepet yönetimi, kullanıcı girişi/üye olma, ödeme adımları (checkout) ve ödeme entegrasyonu ( iyzico) olsun. Admin panelinde ürün ekleme/güncelleme/silme, stok yönetimi, sipariş yönetimi ve kullanıcı yönetimi bulunsun. Backend için Next.js API routes veya Next.js App Router server actions kullan. Veritabanı olarak PostgreSQL  + Prisma tercih et. Proje; responsive tasarım, güvenli kimlik doğrulama (NextAuth), server-side rendering, component bazlı mimari ve temiz dosya yapısı ile oluşturulsun. Tüm kodları adım adım açıkla ve gerekli dosya yapısını oluştur. Ürünler sayfasında listeleniyor mağaza buna göre entegrasyonu eksiksiz şekilde tamamlamanı istiyorum. 
admin tarafında tamamen TailAdmin kullanmanı istiyorum mevcut tasarımdan bağımsız olmalı 